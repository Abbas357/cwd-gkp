!function($){const CWD={matchMedia:window.matchMedia("(max-width: 1024px"),popover:$(".cw-top .right-column .cw-menu-popover"),integratedPlate:$("#integrated-plate"),topMenu:$(".cw-bottom .cw-top-menu-nav>li"),popoverBtn:$(".cw-menu-popover-btn"),searchIcon:$(".searchIcon"),mobileSearch:$(".cw-mobile-search"),cwTop:$(".cw-top"),cwBottom:$(".cw-bottom"),overlay:$(".CWD .popoverOverlay"),searchInput:$("#cw-search-input"),cancelBtn:$(".cw-search-cancel"),suggesstion:$(".cw-search .cw-suggesstion"),sugsContent:$(".cw-search .cw-suggesstion #content"),inputLoading:$(".input-loading"),searchWidget:$(".cw-search .widget"),lastScrollTop:0,touchStartX:0,touchEndX:0,minSwipeDistance:50,handleSearchIcon(){CWD.mobileSearch.hasClass("cw-mobile-search")&&CWD.matchMedia.matches?(setTimeout((()=>{CWD.mobileSearch.removeClass("cw-mobile-search")}),200),CWD.cwBottom.css("height","68px")):(CWD.mobileSearch.addClass("cw-mobile-search"),CWD.cwBottom.css("height","0px"))},handleMatchMedia(){CWD.matchMedia.matches?(CWD.cwBottom.css("height","0px"),CWD.mobileSearch.addClass("cw-mobile-search")):CWD.cwBottom.css("height","50px")},throttle(func,limit){let lastFunc,lastRan;return function(){const context=this,args=arguments;lastRan?(clearTimeout(lastFunc),lastFunc=setTimeout((function(){Date.now()-lastRan>=limit&&(func.apply(context,args),lastRan=Date.now())}),limit-(Date.now()-lastRan))):(func.apply(context,args),lastRan=Date.now())}},handleSearchInput(e){let debounceTimer;clearTimeout(debounceTimer);const input=e.target;CWD.inputLoading.addClass("cw-animated-border"),CWD.searchWidget.css("display","flex"),CWD.sugsContent.empty(),debounceTimer=setTimeout((()=>{input.value.length>2?(CWD.openSearch(input),$.ajax({url:"/search",data:{query:input.value},method:"GET",success:function(response){response.success&&(CWD.searchWidget.css("display","none"),CWD.displayResults(response.data))},complete:function(){CWD.inputLoading.removeClass("cw-animated-border"),CWD.searchWidget.css("display","none")}})):CWD.closeSearch()}),1e3)},displayResults(data){CWD.sugsContent.empty(),CWD.inputLoading.removeClass("cw-animated-border"),CWD.searchWidget.css("display","none"),CWD.sugsContent.html(data.result)},displayErrors(){CWD.sugsContent.empty(),CWD.inputLoading.removeClass("cw-animated-border"),CWD.searchWidget.css("display","none");const li=$("<li>").addClass("cw-search-error").text("No results found. Please try a different Query");CWD.sugsContent.append(li)},openSearch(input){CWD.cancelBtn.show(),CWD.suggesstion.show(),CWD.cancelBtn.on("click",(function(){input.value="",CWD.cancelBtn.hide(),CWD.suggesstion.hide(),CWD.searchInput.focus()}))},closeSearch(){CWD.cancelBtn.hide(),CWD.suggesstion.hide(),CWD.inputLoading.removeClass("cw-animated-border"),CWD.searchWidget.css("display","none")},handleStickyBehavior(){const bottomHeight=CWD.cwBottom.outerHeight();window.scrollY>69&&window.innerWidth>900?($(".cw-bottom-placeholder").length||$("<div>").addClass("cw-bottom-placeholder").height(bottomHeight).insertAfter(CWD.cwBottom),CWD.cwTop.addClass("d-none"),CWD.cwBottom.css({position:"fixed",top:"0",width:"100%",opacity:"0.9"})):window.scrollY<23&&window.innerWidth>900&&($(".cw-bottom-placeholder").remove(),CWD.cwTop.removeClass("d-none"),CWD.cwBottom.css({position:"relative",opacity:"1"}))},handleTouchStart(e){CWD.touchStartX=e.touches[0].clientX},handleTouchEnd(e){CWD.touchEndX=e.changedTouches[0].clientX,CWD.handleSwipe()},handleSwipe(){const distance=CWD.touchEndX-CWD.touchStartX,isPopoverExpanded="true"===CWD.popoverBtn.parentsUntil(".aria-expanded").last().attr("aria-expanded");distance>CWD.minSwipeDistance&&CWD.matchMedia.matches&&!isPopoverExpanded?CWD.openMenu():distance<-CWD.minSwipeDistance&&CWD.matchMedia.matches&&isPopoverExpanded&&CWD.closeMenu()},openMenu(){"true"!==CWD.popoverBtn.parentsUntil(".aria-expanded").last().attr("aria-expanded")&&(CWD.popoverBtn.trigger("click"),CWD.overlay.css({top:"65px",display:"block"}))},closeMenu(){"true"===CWD.popoverBtn.parentsUntil(".aria-expanded").last().attr("aria-expanded")&&(CWD.popoverBtn.trigger("click"),CWD.overlay.hide())}};$(document).ready((function(){CWD.searchIcon.on("click",CWD.handleSearchIcon),CWD.searchInput.on("input",CWD.handleSearchInput),$(window).on("resize",CWD.handleMatchMedia),$(document).on("scroll",CWD.throttle(CWD.handleStickyBehavior.bind(CWD),500)),document.addEventListener("touchstart",CWD.handleTouchStart,!1),document.addEventListener("touchend",CWD.handleTouchEnd,!1),CWD.topMenu.on("mouseenter",(function(){$(this).hasClass("child-nav")&&window.innerWidth>1024&&CWD.overlay.css({top:"113px",display:"block"})})),CWD.topMenu.on("mouseleave",(function(){CWD.overlay.hide()})),CWD.popover.on("mouseenter",(function(){window.innerWidth>900&&CWD.overlay.css({top:"65px",display:"block"})})),CWD.popover.on("mouseleave",(function(){CWD.overlay.hide()})),CWD.popoverBtn.on("click",(function(){"true"===$(this).parentsUntil(".aria-expanded").last().attr("aria-expanded")?CWD.overlay.hide():CWD.overlay.css({top:"65px",display:"block"})}))}))}(jQuery);